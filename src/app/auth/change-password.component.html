<div class="change-password-component">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <button class="back-btn" (click)="goBack()">
        â† Back to Profile
      </button>
      <div class="header-info">
        <h2>ğŸ” Change Password</h2>
        <p class="subtitle">Update your account password securely</p>
      </div>
      <div class="header-spacer"></div>
    </div>
  </div>

  <!-- Change Password Form -->
  <div class="form-container">
    <div class="form-card">
      <div class="form-header">
        <h3>Password Update</h3>
        <p>Please enter your current password and choose a new secure password</p>
      </div>

      <!-- General Error Message -->
      <div *ngIf="errors.general" class="error-message general-error">
        <i class="error-icon">âš ï¸</i>
        {{ errors.general }}
      </div>

      <form (ngSubmit)="onSubmit()" #formRef="ngForm">
        <!-- Current Password -->
        <div class="form-group">
          <label for="currentPassword">Current Password *</label>
          <div class="password-input-wrapper">
            <input
              type="{{ showCurrentPassword ? 'text' : 'password' }}"
              id="currentPassword"
              name="currentPassword"
              [(ngModel)]="passwordForm.currentPassword"
              [class.error]="errors.currentPassword"
              placeholder="Enter your current password"
              required
              #currentPassword="ngModel"
            />
            <button
              type="button"
              class="password-toggle"
              (click)="togglePasswordVisibility('current')"
            >
              {{ showCurrentPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
            </button>
          </div>
          <div *ngIf="errors.currentPassword" class="error-text">
            {{ errors.currentPassword }}
          </div>
        </div>

        <!-- New Password -->
        <div class="form-group">
          <label for="newPassword">New Password *</label>
          <div class="password-input-wrapper">
            <input
              type="{{ showNewPassword ? 'text' : 'password' }}"
              id="newPassword"
              name="newPassword"
              [(ngModel)]="passwordForm.newPassword"
              [class.error]="errors.newPassword"
              placeholder="Enter your new password"
              required
              #newPassword="ngModel"
            />
            <button
              type="button"
              class="password-toggle"
              (click)="togglePasswordVisibility('new')"
            >
              {{ showNewPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
            </button>
          </div>
          <div *ngIf="errors.newPassword" class="error-text">
            {{ errors.newPassword }}
          </div>
          <div class="password-requirements">
            <small>Password must be at least 6 characters long and different from current password</small>
          </div>
        </div>

        <!-- Confirm New Password -->
        <div class="form-group">
          <label for="confirmPassword">Confirm New Password *</label>
          <div class="password-input-wrapper">
            <input
              type="{{ showConfirmPassword ? 'text' : 'password' }}"
              id="confirmPassword"
              name="confirmPassword"
              [(ngModel)]="passwordForm.confirmPassword"
              [class.error]="errors.confirmPassword"
              placeholder="Confirm your new password"
              required
              #confirmPassword="ngModel"
            />
            <button
              type="button"
              class="password-toggle"
              (click)="togglePasswordVisibility('confirm')"
            >
              {{ showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
            </button>
          </div>
          <div *ngIf="errors.confirmPassword" class="error-text">
            {{ errors.confirmPassword }}
          </div>
        </div>

        <!-- Password Generator -->
        <div class="password-generator">
          <button
            type="button"
            class="generate-btn"
            (click)="generateStrongPassword()"
            title="Generate a strong password"
          >
            ğŸ² Generate Strong Password
          </button>
        </div>

        <!-- Form Actions -->
        <div class="form-actions">
          <button
            type="button"
            class="cancel-btn"
            (click)="goBack()"
            [disabled]="loading"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="submit-btn"
            [disabled]="loading"
          >
            <span *ngIf="loading" class="loading-spinner"></span>
            {{ loading ? 'Updating...' : 'Update Password' }}
          </button>
        </div>
      </form>
    </div>

    <!-- Security Tips -->
    <div class="security-tips">
      <h4>ğŸ›¡ï¸ Password Security Tips</h4>
      <ul>
        <li>Use a combination of uppercase and lowercase letters</li>
        <li>Include numbers and special characters</li>
        <li>Make it at least 8-12 characters long</li>
        <li>Avoid using personal information</li>
        <li>Don't reuse passwords from other accounts</li>
        <li>Consider using a password manager</li>
      </ul>
    </div>
  </div>
</div>
